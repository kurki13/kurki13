<html>
<head>
    <META charset='utf-8'/>
    <title>KURKI</title>
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
</head>
<body>


<div style="font-size: 90%">

#set($qs = $request.getQueryString())

#if($qs)
    #set($params = $queryparser.split($qs))
#end

#set($bundle = $SessioApuri.bundle($request))

#if($session.getAttribute('selected_course_id'))
    #set ($valittuKurssi = $KurssiKyselyt.kurssiIDlla($session.getAttribute('selected_course_id')))
#end
#if($valittuKurssi)
    #set ($osallistumiset = $OsallistuminenKyselyt.osallistumisetKurssilla($valittuKurssi))
#end  

$bundle.getString("HY")
#foreach ( $i in [1..15] )
     &emsp;
#end
$bundle.getString("tktlkurki")
<br>$bundle.getString("matlu")<br>
<br>$bundle.getString("cslaitos")<br>
<br>$bundle.getString("opintojakso"): $valittuKurssi.kurssikoodi, $valittuKurssi.nimi [$valittuKurssi.lukukausi$valittuKurssi.lukuvuosi]
<br>$bundle.getString("laajuus"): $valittuKurssi.opintopisteet $bundle.getString("op")
<br>$bundle.getString("suoritusaika"): $date.format('d.M.yyyy', $valittuKurssi.suoritus_pvm)
<br>$bundle.getString("hyvaksyja"): $HenkiloKyselyt.haeNimet($valittuKurssi.omistaja)

#set ($lol = $request.getParameterNames())

#if ($request.getParameter("inc_accepted") == "on")
    <p>    
    <br>$bundle.getString("hyvaksytyt")<br>
    <table class="table table-bordered table-condensed"  style="font-size: 90%;width: auto">
        #foreach ($osallistuminen in $osallistumiset)
        <tr>
             #if ($osallistuminen.arvosana == "1"||$osallistuminen.arvosana == "2"||$osallistuminen.arvosana == "3"||$osallistuminen.arvosana == "4"||$osallistuminen.arvosana == "5"||$osallistuminen.arvosana == "+")
                #if($request.getParameter("inc_ssn") == "on")<td>$osallistuminen.hetu</td>#end
                <td>$osallistuminen.sukunimi, $osallistuminen.etunimi</td> 
                #if($request.getParameter("inc_koesep") == "on")
                    #if ($valittuKurssi.valikokeet_lkm > 0)                         
                    #foreach ( $i in [1..$valittuKurssi.valikokeet_lkm] )       
                     <td>#if($osallistuminen.kokeet.osa($i) != "")
                        $osallistuminen.kokeet.osa($i)
                        #else
                        0
                        #end</td>
                    #end
                    #end
                #end
                #if($request.getParameter("inc_koesum") == "on")<td>$osallistuminen.laskarit.getYhteispisteet()</td>#end                
                #if($request.getParameter("inc_lhsum") == "on")<td>$osallistuminen.kokeet.getYhteispisteet()</td>#end
                #if($request.getParameter("inc_htsum") == "on")<td>$osallistuminen.harjoitustyot.getYhteispisteet()</td>#end
                #if($request.getParameter("inc_sum") == "on")
                    #set ($yht = $osallistuminen.laskarihyvitys+$osallistuminen.harjoitustyohyvitys+$osallistuminen.kokeet.getYhteispisteet())
                    <td>$yht</td>
                #end
                #if($request.getParameter("inc_lhlp") == "on")<td>$osallistuminen.laskarihyvitys</td>#end
                #if($request.getParameter("inc_htlp") == "on")<td>$osallistuminen.harjoitustyohyvitys</td>#end
                #if($request.getParameter("inc_grade") == "on")<td>$osallistuminen.arvosana</td>#end
                #if($request.getParameter("inc_crunits") == "on")<td>$osallistuminen.laajuus_op</td>#end               
                
             #end
         </tr>
        #end
    </table>

        #if($request.getParameter("inc_gradeDistr") == "on")
            #set ($viisi = 0)
            #set ($nelja = 0)
            #set ($kolme = 0)
            #set ($kaksi = 0)
            #set ($yksi = 0)
            #foreach ($osallistuminen in $osallistumiset)
                #if ($osallistuminen.arvosana == 5)
                    #set ($viisi = $viisi+1)
                #end
                #if ($osallistuminen.arvosana == 4)
                    #set ($nelja = $nelja+1)
                #end
                #if ($osallistuminen.arvosana == 3)
                    #set ($kolme = $kolme+1)
                #end
                #if ($osallistuminen.arvosana == 2)
                    #set ($kaksi = $kaksi+1)
                #end
                #if ($osallistuminen.arvosana == 1)
                    #set ($yksi = $yksi+1)
                #end
            #end            
            
            <p>$bundle.getString("arvosanajakauma")<br>
            &emsp;5: $viisi&emsp;#if ($viisi > 0)#foreach ($i in [1..$viisi])*#end#end<br> 
            &emsp;4: $nelja&emsp;#if ($nelja > 0)#foreach ($i in [1..$nelja])*#end#end<br>
            &emsp;3: $kolme&emsp;#if ($kolme > 0)#foreach ($i in [1..$kolme])*#end#end<br>   
            &emsp;2: $kaksi&emsp;#if ($kaksi > 0)#foreach ($i in [1..$kaksi])*#end#end<br>
            &emsp;1: $yksi&emsp;#if ($yksi > 0)#foreach ($i in [1..$yksi])*#end#end<br>
            </p>

        #end 

        #if($request.getParameter("inc_feedback") == "on")
            <p>$bundle.getString("palautetilaisuus") __.__ $bundle.getString("klo") __:__ - __:__ $bundle.getString("huoneessa") ____.</p>                
        #end

        #if($request.getParameter("inc_signature") == "on")
            <p><br>$bundle.getString("helsingissa") $date.get('d.M.yyyy')<br>
            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;_____________________________<br>
            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;$HenkiloKyselyt.haeNimet($valittuKurssi.omistaja)</p>                
        #end
    </p>
#end

#set ($lol = $request.getParameterNames())

#if ($request.getParameter("inc_failed") == "on")
    <p>    
    $bundle.getString("isohylatyt")<br>
    #foreach ($osallistuminen in $osallistumiset)
         #if ($osallistuminen.arvosana == "0")
            <br>#if($request.getParameter("inc_ssn") == "on")$osallistuminen.hetu &emsp;#end
            $osallistuminen.sukunimi, $osallistuminen.etunimi
         #end
    #end
    </p>
#end

#set ($lol = $request.getParameterNames())
<p>
<b><br>Nimet:<br></b>
#foreach ($hihi in $lol)
$hihi<br>
#end
<b>Values:<br></b>
$request.getParameter("filter")
$request.getParameter("ltype")
$request.getParameter("inc_sum")
$request.getParameter("inc_koesum")
$request.getParameter("inc_accepted")
</p>
</div>
</body>
</html>