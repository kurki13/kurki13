#parse("hello.vm")
<h1>$bundle.getString("5grades")</h1>

#set($arvostelutavat = {1 : $bundle.getString("conventionLabel1"),
                        2 : $bundle.getString("conventionLabel2"),
                        3 : $bundle.getString("conventionLabel3"),
                        4 : $bundle.getString("conventionLabel4"),
                        5 : $bundle.getString("conventionLabel5"),
                        6 : $bundle.getString("conventionLabel6"),
                        7 : $bundle.getString("conventionLabel7"),
                        8 : $bundle.getString("conventionLabel8"),
                        9 : $bundle.getString("conventionLabel9")
                        }
)

#if($request.getParameter("tallenna"))
    $Arvostelu.kasitteleLomake($valittuKurssi, $request)
#end

#if($request.getParameter("arvostele"))
    $SQLProseduurit.suoritaArvostelu($valittuKurssi, $request.getRemoteUser(), $request)
#end

<form name="arvostelu" action="" method=get class="form-inline">

<h3>$bundle.getString('osasuorituksia'):</h3>

<table>
    <tr>
        <th>
        </th>
        <th>$bundle.getString('lh_lyhenne'):
        </th>
        <th>$bundle.getString('ht_lyhenne'):
        </th>
        <th>$bundle.getString('koe_lyhenne'):
        </th>
    </tr>
    <tr>
        <td style="width: 300px">$bundle.getString('yht'):
        </td>
        <td>$valittuKurssi.laskarikerta_lkm
        </td>
        <td>$valittuKurssi.harjoitustyo_lkm
        </td>
        <td>$valittuKurssi.valikokeet_lkm
        </td>
    </tr>
    <tr>
        <td>$bundle.getString('pakollisia')
        </td>
        <td><input name=lh_pak value=$valittuKurssi.pakolliset_laskarikerta_lkm>
        </td>
        <td><input name=ht_pak value=$valittuKurssi.pakolliset_harjoitustyo_lkm>
        </td>
        <td><input name=koe_pak value=$valittuKurssi.pakolliset_koe_lkm>
        </td>
    </tr>
</table>
<h3>$bundle.getString('suorpstos')</h3>

<table>
    <tr>
        <th>
        </th>
        <th>$bundle.getString('lh_lyhenne'):
        </th>
        <th>$bundle.getString('ht_lyhenne'):
        </th>
        <th>$bundle.getString('koe_lyhenne'):
        </th>
    </tr>
    <tr>
        <td style="width: 300px">$bundle.getString('saatavissa'):
        </td>
        <td>$valittuKurssi.laskariRajat.maxPisteetYhteensa
        </td>
        <td>$valittuKurssi.harjoitustyoRajat.maxPisteetYhteensa
        </td>
        <td>$valittuKurssi.koeRajat.maxPisteetYhteensa
        </td>
    </tr>
    <tr>
        <td>$bundle.getString('hyvrajsum')
        </td>
        <td>$valittuKurssi.laskariRajat.minPisteetYhteensa
        </td>
        <td>$valittuKurssi.harjoitustyoRajat.minPisteetYhteensa
        </td>
        <td>$valittuKurssi.koeRajat.minPisteetYhteensa
        </td>
    </tr>    
    <tr>
        <td>$bundle.getString('oshr')
        </td>
        <td><input name=lh_oshyv value=$valittuKurssi.pakolliset_laskaritehtava_lkm>
        </td>
        <td><input name=ht_oshyv value=$valittuKurssi.min_harjoitustyopisteet_summa>
        </td>
        <td><input name=koe_oshyv value=$valittuKurssi.min_koepisteet_summa>
        </td>
    </tr>
</table>

<h3>$bundle.getString('arvlp')</h3>

<table>
    <tr>
        <th>
        </th>
        <th>$bundle.getString('lh_lyhenne'):
        </th>
        <th>$bundle.getString('ht_lyhenne'):
        </th>
        <th>$bundle.getString('koe_lyhenne'):
        </th>
    </tr>
    <tr>
        <td style="width: 300px">$bundle.getString('maksimi'):
        </td>
        <td><input name=lh_lisapistemaksimi value=$valittuKurssi.max_laskaripisteet>
        </td>
        <td><input name=ht_lisapistemaksimi value=$valittuKurssi.harjoitustyopisteet>
        </td>
        <td>$valittuKurssi.koeRajat.maxPisteetYhteensa
        </td>
    </tr>
    <tr>
        <td>$bundle.getString('1pstraja'):
        </td>
        <td><input name=lh_lisapistealaraja value=$valittuKurssi.lisapistealaraja>
        </td>
        <td><input name=ht_lisapistealaraja value=$valittuKurssi.ht_lisapistealaraja>
        </td>
        <td>1
        </td>
    </tr>    
    <tr>
        <td>$bundle.getString('kartuntavali'):
        </td>
        <td><input name=lh_kartuntavali value=$valittuKurssi.lisapisteiden_askelkoko>
        </td>
        <td><input name=ht_kartuntavali value=$valittuKurssi.harjoitustoiden_askelkoko>
        </td>
        <td>1
        </td>
    </tr>
</table>

<h3>$bundle.getString('muut'):</h3>

<table>
    <tr>
        <td style="width: 300px">$bundle.getString('pstmax'):
        </td>
        <td>#set($summa = $valittuKurssi.max_laskaripisteet + $valittuKurssi.harjoitustyopisteet + $valittuKurssi.koeRajat.maxPisteetYhteensa) $summa
        </td>
    </tr>
    <tr>
        <td>$bundle.getString('hyvar'):
        </td>
        <td><input name=hyvalaraja value=$valittuKurssi.min_yhteispisteet>
        </td>
    </tr>   
    <tr>
        <td>$bundle.getString('arvosanavali'):
        </td>
        <td><input name=arvosanavali value=$valittuKurssi.arvostelun_askelkoko>
        </td>
    </tr>       
    <tr>
        <td>$bundle.getString('arvasteikko'):
        </td>
        <td>
            <input type="radio" name="arvosteluasteikko" value="K" #if($valittuKurssi.arvostellaanko.equals("K")) checked #end>$bundle.getString('arvosanat')
            <input type="radio" name="arvosteluasteikko" value="E" #if($valittuKurssi.arvostellaanko.equals("E")) checked #end>$bundle.getString('hyvhyl')
        </td>
    </tr>   
    <tr>
        <td>$bundle.getString('arvtapa'):
        </td>
        <td>
            <select name=arvostelutapa>
                #foreach($e in $arvostelutavat.entrySet())
                    <option value=$e.key #if($valittuKurssi.laskentakaava && $valittuKurssi.laskentakaava == $e.key)selected#end>$e.value</option>
                #end
            </select>
        </td>
    </tr>
</table>
<input type=submit name=tallenna class="btn" value=$bundle.getString("tmuutokset") onClick="">
<input type=submit name=arvostele class="btn" value="$bundle.getString("teearv")" onClick="">
<a href="lisapisterajat.vm">$bundle.getString("muutaparajoja")</a>
</form>

#parse("bottom.vm")