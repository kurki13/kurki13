#set($valittuKurssi = $KurssiKyselyt.kurssiIDlla($session.getAttribute('selected_course_id')))

##Tässä määritellään pudotusvalikon valinnat ja sivujen osoitteet, joihin ohjataan käyttäjä
#set ($tyypit = {"laskarit.vm" : $bundle.getString("Laskuharjoituspisteet"), 1 : $bundle.getString("Harjoitustyöpisteet") , 2 : $bundle.getString("Koepisteet") ,
3 : $bundle.getString("Arvosana") , 4 : $bundle.getString("Opintopisteet") , 5 : $bundle.getString("Suorituskieli")})

#set ($kerrat = {"laskarit" : $valittuKurssi.laskarikerta_lkm, "harjoitustyot" : $valittuKurssi.harjoitustyo_lkm ,
"kokeet" : $valittuKurssi.valikokeet_lkm})

<h3>$bundle.getString("1entry")</h3>

<form name="suoritteidenKirjaus" action="" method=get class="form-inline">

    <b>$bundle.getString("tyyppi"):</b>
    <select name="type"  class="form-control form-inline" style="width:250px">
    #foreach($t in $tyypit.entrySet())
        #if($t.key == $params.get('type'))
        <option value=$t.key selected>$t.value</option>
        #else
        <option value=$t.key>$t.value</option>
        #end
    #end

    </select>

##tallennetaan listaan kuinka monta laskarikertaa kurssilla on
#set($start = 1)
#set($end = $valittuKurssi.laskarikerta_lkm)
#set($laskarikerrat = [$start..$end])

    <b>$bundle.getString("kerta"):</b>
    <select name="kerta" class="form-control form-inline" style="width:100px">
    #foreach($k in $laskarikerrat)
        #if($k == $params.get('kerta'))
        <option value=$k selected>$k</option>
        #else
        <option value=$k>$k</option>
        #end
    #end
    </select>

##haetaan kurssin ryhmät, ja jätetään pois mystinen ryhmä "0"
#set ($ryhmat = [])
#foreach($r in $OpetusKyselyt.opetusTiedot($valittuKurssi))
    #if ($r.ilmo_jnro != 0)
##lisätään tulostus muuttujaan 'var' jota ei käytetä missään, muuten velocity haluaa tulostaa "true" kun listaan lisäys on onnistunut
        #set ($var = $ryhmat.add($r.ilmo_jnro))
    #end
#end

    <b>$bundle.getString("ryhma"):</b>
    <select name="ryhma" class="form-control form-inline" style="width:100px">
    #foreach($r in $ryhmat)
        #if($r == $params.get('ryhma'))
        <option value=$r selected>$r</option>
        #else
        <option value=$r>$r</option>
        #end
    #end
    </select>


    <b>$bundle.getString("opiskelijat"):</b>
    <input type="text" class="form-control form-inline" style="width:150px" name="opiskelijat">

    <input type=submit class="btn" value=">>>">

</form>

##lisätään formin lähettämät filteröintiehdot 'filterit' listaan
#set ($filterit = [$params.get('type'), $params.get('kerta'), $params.get('ryhma'), $params.get('opiskelijat')])

##lisätään filteröintiehdot session-muuttujaan, jotta ne pysyvät muistissa
$session.setAttribute("filters", $filterit)

filterit: $session.getAttribute("filters")

#parse ($params.get('type'))

##valittu $params.get('lisääTähänNimi')

</body>
<html>