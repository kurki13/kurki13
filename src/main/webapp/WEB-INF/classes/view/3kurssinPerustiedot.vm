#set($valittuKurssi = $session.getAttribute('selected_course'))
#parse("hello.vm")

#if ($valittuKurssi.getTila() == "J")
    #set ($jaassa = true)
#else
    #set ($jaassa = false)
#end

##Tässä määritellään säädettäville kentille otsikot, niiden arvot tietokantaoliosta, ja get -parametrien arvo
#set($basics = {
    $bundle.getString("laskuharjoituksia") : [
            [""                               ,$valittuKurssi.harjoitustunnit, "lh"], 
            [$bundle.getString("jpakollisia") ,$valittuKurssi.pakolliset_laskaritehtava_lkm, "lh_p"], 
            [$bundle.getString("lisapisteet") ,$valittuKurssi.max_laskaripisteet, "lh_lp"]
        ],
    $bundle.getString("harjoitustoita") : [
            [""                                ,$valittuKurssi.harjoitustyo_lkm, "ht"], 
            [$bundle.getString("jpakollisia")  ,$valittuKurssi.pakolliset_harjoitustyo_lkm, "ht_p" ], 
            [$bundle.getString("lisapisteet")  ,$valittuKurssi.harjoitustyopisteet, "ht_lp"]
        ],
    $bundle.getString("kokeita") : [
            [ ""                               ,$valittuKurssi.valikokeet_lkm, "koe"], 
            [ $bundle.getString("jpakollisia") ,$valittuKurssi.pakolliset_koe_lkm, "koe_p"]
        ]
    }
)

<form name="kurssinPerustiedot" action="" method=get class="form-inline">
    #foreach($otsikko in $basics.keySet()) ##Otsikko tässä joko Laskuharjoitukset, Harjoitustyöt tai Kokeet
        ##<h3>$otsikko</h3>
        <br>
        <table>
        #foreach($alaotsikko in $basics.get($otsikko))
            #set($nimi = $alaotsikko.get(0))
            #set($kentta = $alaotsikko.get(1))
            #set($parametri = $alaotsikko.get(2))
            <tr>
                <td>
                    #if($nimi.equals(""))$otsikko#end
                    $nimi
                </td>
                <td>
                    <input type="text" 
                    class="form-control" 
                    style="width:50px"
                    name="$parametri" ##get-parametria varten, "lh", "lh_p" jne...
                    value="$kentta" ##arvo valitun kurssin oliolta
                    #if($jaassa) readonly #end>
                </td>
            </tr>
        #end
        </table>
    #end
    <br>    
    <input type=submit class="btn" value=$bundle.getString("tmuutokset") onClick="">
</form>
</body>
<html>