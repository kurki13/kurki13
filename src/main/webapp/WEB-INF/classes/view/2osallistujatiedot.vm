#parse("hello.vm")

##Filterit/parametrit
#set($sukuFilter = $params.get('filterSukunimi'))
#set($hetuFilter = $params.get('filterOpnro'))
#set($ryhmaFilter = $params.get('ryhma'))
#set($toiminto = $params.get('toiminto'))

##haetaan kurssin ryhmät, ja jätetään pois mystinen ryhmä "0"
##lisätään tulostus muuttujaan 'var' jota ei käytetä missään, muuten velocity haluaa tulostaa "true" kun listaan lisäys on onnistunut
#set ($ryhmat = [])
#foreach($ryhmanro in $OpetusKyselyt.opetuksetKurssilla($valittuKurssi))
    #if ($ryhmanro.ilmo_jnro != 0)
        #set ($var = $ryhmat.add($ryhmanro.ilmo_jnro))
    #end
#end

##Valikko ohjaa toiminnot toisiin tiedostoihin
#set ($toiminnot = {
    "osallistujat_listaus.vm" : $bundle.getString("tiedot") ,
    "osallistujat_lisaa.vm" : $bundle.getString("haelisatop") ,
    "osallistujat_palaut.vm" : $bundle.getString("haepalop")})


<h1>$bundle.getString("2participants")</h1>

<form name="osallistujatiedot" action="" method=get class="form-inline">
  
  <b>$bundle.getString("isosnimi"):</b>
  <input type="text" class="form-control form-inline" style="width:150px"
          name="filterSukunimi" #if($sukuFilter && !$sukuFilter.equals(""))value=$sukuFilter#end>


  <b>$bundle.getString("ryhma"):</b>
  <select name="ryhma" class="form-control form-inline" style="width:100px">
   #foreach($ryhma in $ryhmat)
         <option #if($ryhmaFilter && $ryhma==$ryhmaFilter)selected#end value=$ryhma>$ryhma</option>
    #end
  </select>

  <b>$bundle.getString("camelopnro"):</b>
  <input type="text" class="form-control form-inline" style="width:150px" 
      name="filterOpnro" #if($hetuFilter && !$hetuFilter.equals(""))value=$hetuFilter#end>


  <select name="toiminto" class="form-control form-inline" style="width:350px">
   #foreach($t in $toiminnot.entrySet())
      #if($t.key == $toiminto)
        <option value=$t.key selected>$t.value</option>
      #else
        <option value=$t.key>$t.value</option>
      #end
    #end
  </select>

    <input type=submit class="btn" value=">>>">
</form>


#if($request.getParameter("hetuParam")) ##tiedot  
    #parse ("osallistuja_tiedot.vm")
    <br>

#elseif($toiminto)
    #parse ($toiminto)
#end

#parse("bottom.vm")